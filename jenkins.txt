pipeline {
  agent any
  stages {
  
    stage('Checkout') {
      steps {
        checkout([$class: 'GitSCM',
        branches: [[name: '*/master']], 
        doGenerateSubmoduleConfigurations: false,
        extensions: [[$class: 'RelativeTargetDirectory', 
        relativeTargetDir: 'scripts']], 
        submoduleCfg: [], 
        userRemoteConfigs: [[url: 'https://github.com/KarthikSadashiva/shell_scripts']]])
      }
    }
    stage('Executing') {
      steps {   
        sh "chmod  +x scripts/task1.sh"
        sh "chmod  +x scripts/task2.sh"
        sh('./scripts/task1.sh')   
        sh('./scripts/task2.sh')   
      }
    }
    stage('Archiving') { 
      steps {
        archiveArtifacts "scripts/*.sh"   
      }
    }
    stage('Maven Install') {
      agent {
        docker {
          image 'maven:3.5.0'
        }
      }
      steps {
        sh 'mvn clean install'
      }
    }
  }
  
  
    post{
    always {
        echo "RESULT: ${currentBuild.currentResult}" 
    }
    
  }
}
